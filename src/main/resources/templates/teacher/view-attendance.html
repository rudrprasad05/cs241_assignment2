<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="layout-dashboard :: head(name='Dashboard')"><title>Admin Dashboard</title></head>

<body th:replace="layout-dashboard :: body(sideNavLinks=${sideNavLinks})">

<div th:fragment="main" class="">

  <div th:insert="fragments/toast :: toast(type=${toastType}, message=${toastMessage})"></div>

  <div>
    <div>
      <div th:each="sessionClass : ${sessions}">
        <span>Week: </span>
        <span th:text="${sessionClass.getWeek()}"></span>
        <a th:href="@{|/teacher/subjects/${sessionClass.getSubjectClass().getSubject().getCode()}/${sessionClass.getSubjectClass().getId()}/attendance/${sessionClass.getId()}|}">
          details
        </a>

      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>



  <script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", function() {
      const accordion = document.getElementById('weekAccordion');

      // Check if there's a stored state in localStorage
      const activeAccordion = localStorage.getItem('activeAccordion');
      if (activeAccordion) {
        const collapseElement = document.getElementById(activeAccordion);
        if (collapseElement) {
          // Open the stored accordion
          new bootstrap.Collapse(collapseElement, {
            toggle: true
          });
        }
      }

      accordion.addEventListener('shown.bs.collapse', function (event) {
        const openedAccordionId = event.target.id;
        localStorage.setItem('activeAccordion', openedAccordionId);
      });

      accordion.addEventListener('hidden.bs.collapse', function (event) {
        localStorage.removeItem('activeAccordion');
      });
    });
  </script>

</div>

</body>
</html>
