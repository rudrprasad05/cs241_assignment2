<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="layout-dashboard :: head(name='Dashboard')"><title>Admin Dashboard</title></head>

<body th:replace="layout-dashboard :: body(sideNavLinks=${sideNavLinks})">

<div th:fragment="main" class="">

    <div class="container-fluid w-100 m-2">
        <div class="no-data-box d-flex" th:if="${#lists.isEmpty(receivedNotifications)}"><p class="mx-auto my-auto">No data available</p></div>

        <div class="d-flex flex-column gap-3">
            <div class="card container-fluid" th:each="notification : ${receivedNotifications}">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex gap-3 align-items-center">
                            <div class="fs-5" th:text="${notification.getTitle()}"></div>
                            <div class="d-flex gap-2">
                                <h6 th:text="${notification.getType().toString()}" class="rounded-pill badge bg-primary small text-lowercase"></h6>
                                <h6 th:text="${notification.isSeen() ? 'Seen' : 'New'}" class="rounded-pill badge bg-secondary small"></h6>
                            </div>

                        </div>
                        <div class="d-flex justify-content-end" style="width: 50px;">
                            <form action="/notification/seen" method="post" th:if="${!notification.isSeen()}">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <input type="hidden" th:name="id" th:value="${notification.getId()}" />

                                <button data-bs-toggle="tooltip" data-bs-placement="top" title="Change to Seen" class="btn p-0 border-0 bg-transparent" type="submit" style="width: 20px">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="green" class="size-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                    </svg>
                                </button>

                            </form>

                            <form action="/notification/delete" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <input type="hidden" th:name="id" th:value="${notification.getId()}" />

                                <button class="btn p-0 border-0 bg-transparent" type="submit" style="width: 20px">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="red" class="size-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                                    </svg>
                                </button>
                            </form>

                        </div>
                    </div>


                    <h6 class="text-muted">
                        <span th:text="${notification.getCreatedAt().getHour()} + ':' + ${notification.getCreatedAt().getMinute()}"></span>
                        <span th:text="${notification.getCreatedAt().getDayOfMonth()} + '/' + ${notification.getCreatedAt().getMonthValue()} + '/' + ${notification.getCreatedAt().getYear()} "></span>
                    </h6>

                    <p class="mt-2" th:text="${notification.getMessage()}">

                    </p>
            </div>
        </div>

    </div>
</div>


</body>
</html>
